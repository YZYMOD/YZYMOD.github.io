<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Individual Frame Animation Test</title>
  <style>
    #spriteCanvas {
      border: 3px solid #6c757d;
      background-color: #f8f9fa;
      display: block;
      margin: 20px auto;
    }
    body { text-align: center; font-family: Arial, sans-serif; }
  </style>
</head>
<body>
  <!-- Canvas is now HALF of 1340x1936 -->
  <canvas id="spriteCanvas" width="670" height="968"></canvas>

  <script>
    const canvas = document.getElementById('spriteCanvas');
    const ctx = canvas.getContext('2d');

    // Your original frame resolution
    const ORIGINAL_WIDTH = 1340;
    const ORIGINAL_HEIGHT = 1936;

    // Desired display size (multiply original by 0.375)
    const DISPLAY_WIDTH = ORIGINAL_WIDTH * 0.375;
    const DISPLAY_HEIGHT = ORIGINAL_HEIGHT * 0.375;

    canvas.width = DISPLAY_WIDTH;
    canvas.height = DISPLAY_HEIGHT;

    const FRAME_FILES = ['frame1.PNG', 'frame2.PNG', 'frame3.PNG'];
    const FRAME_COUNT = FRAME_FILES.length;

    const frameImages = [];
    let imagesLoadedCount = 0;

    const FRAME_FPS = 12;

    function loadFrames() {
      return new Promise((resolve) => {
        FRAME_FILES.forEach((fileName, index) => {
          const img = new Image();
          img.onload = () => {
            imagesLoadedCount++;
            if (imagesLoadedCount === FRAME_COUNT) resolve();
          };
          img.onerror = () => {
            console.error(`Failed to load frame: ${fileName}`);
            imagesLoadedCount++;
            if (imagesLoadedCount === FRAME_COUNT) resolve();
          };
          img.src = fileName;
          frameImages[index] = img;
        });
      });
    }

    let currentFrameIndex = 0;
    let lastTime = 0;
    const msPerFrame = 1000 / FRAME_FPS;

    function gameLoop(time) {
      if (!lastTime) lastTime = time;
      const delta = time - lastTime;

      if (delta >= msPerFrame) {
        currentFrameIndex = (currentFrameIndex + 1) % FRAME_COUNT;
        lastTime = time;
      }

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const img = frameImages[currentFrameIndex];

      if (img) {
        // Maintain aspect ratio while fitting inside canvas
        const ratio = Math.min(
          canvas.width / img.width,
          canvas.height / img.height
        );

        const drawWidth = img.width * ratio;
        const drawHeight = img.height * ratio;

        // Center the image
        const x = (canvas.width - drawWidth) / 2;
        const y = (canvas.height - drawHeight) / 2;

        ctx.drawImage(img, x, y, drawWidth, drawHeight);
      }

      requestAnimationFrame(gameLoop);
    }

    loadFrames().then(() => {
      console.log('All frames loaded. Starting animation.');
      requestAnimationFrame(gameLoop);
    });
  </script>
</body>
</html>
